# Copyright 2025 The ChaosBlade Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

{{- if not .Values.database.existingSecret }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "chaosblade-space-exploration.fullname" . }}-database
  namespace: {{ .Values.namespace | default "chaosblade" }}
  labels:
    {{- include "chaosblade-space-exploration.labels" . | nindent 4 }}
    app.kubernetes.io/component: database-secret
type: Opaque
data:
  username: {{ (.Values.database.username | default "root") | b64enc }}
  password: {{ (.Values.database.password | default "password") | b64enc }}
{{- end }}

{{- if not .Values.redis.existingSecret }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "chaosblade-space-exploration.fullname" . }}-redis
  namespace: {{ .Values.namespace | default "chaosblade" }}
  labels:
    {{- include "chaosblade-space-exploration.labels" . | nindent 4 }}
    app.kubernetes.io/component: redis-secret
type: Opaque
data:
  password: {{ (.Values.redis.password | default "redis123") | b64enc }}
{{- end }}

{{- if not .Values.kubernetes.existingSecret }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "chaosblade-space-exploration.fullname" . }}-kubernetes
  namespace: {{ .Values.namespace | default "chaosblade" }}
  labels:
    {{- include "chaosblade-space-exploration.labels" . | nindent 4 }}
    app.kubernetes.io/component: kubernetes-secret
type: Opaque
data:
  token: {{ (.Values.kubernetes.token | default "dummy-token") | b64enc }}
{{- end }}

{{- if not .Values.llm.existingSecret }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "chaosblade-space-exploration.fullname" . }}-llm
  namespace: {{ .Values.namespace | default "chaosblade" }}
  labels:
    {{- include "chaosblade-space-exploration.labels" . | nindent 4 }}
    app.kubernetes.io/component: llm-secret
type: Opaque
data:
  key: {{ (.Values.llm.api.key | default "dummy-key") | b64enc }}
{{- end }}
