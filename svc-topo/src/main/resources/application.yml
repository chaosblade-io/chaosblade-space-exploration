server:
    port: 8106
    servlet:
        context-path: /

spring:
    application:
        name: chaosblade-topo

    servlet:
        multipart:
            max-file-size: 50MB
            max-request-size: 50MB
            enabled: true

    thymeleaf:
        cache: false
        mode: HTML
        encoding: UTF-8
        prefix: classpath:/templates/
        suffix: .html

    jackson:
        serialization:
            write-dates-as-timestamps: false
        deserialization:
            accept-single-value-as-array: true

logging:
    level:
        org.springframework.web: INFO
    pattern:
        console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# 应用特定配置
topo:
    visualizer:
        upload:
            temp-dir: /tmp/topo-uploads
            allowed-extensions: json
        graph:
            max-nodes: 10000
            max-edges: 50000
        mock: true  # 是否启用 trace-mock 数据

topology:
# 拓扑自动刷新配置
    auto-refresh:
        enabled: true                    # 是否启用自动刷新
        interval-seconds: 15             # 刷新间隔（秒）
        time-range-seconds: 15           # 查询时间范围（秒）
        jaeger:
            host: localhost                # Jaeger 主机地址
            port: 16685                    # Jaeger gRPC 端口
            http-port: 16686               # Jaeger HTTP API 端口
            query-method: http             # Jaeger 查询方式：grpc 或 http
        service-name: ts-preserve-service           # 默认查询的服务名
#        operation-name: all              # 默认查询的操作名

# 拓扑缓存配置
    cache:
        max-size: 100                   # 缓存最大条目数